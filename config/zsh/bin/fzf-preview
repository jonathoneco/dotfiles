#!/bin/bash

FILE="$1"

# Skip if unreadable or empty
if [[ ! -r "$FILE" || -d "$FILE" ]]; then
  echo "Cannot preview: not a readable file"
  exit 0
fi

# Show mime type to check for binary
MIME=$(file --mime-type -b "$FILE")
if [[ "$MIME" =~ ^text/ ]]; then
  if command -v bat &>/dev/null; then
    bat --style=plain,numbers --color=always --line-range :100 "$FILE"
  else
    head -n 100 "$FILE"
  fi
else
  echo "Binary file: $MIME"
fi

